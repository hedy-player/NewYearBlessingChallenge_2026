<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 è²¡æºå»£é€² </title>
    <style>
        body { margin: 0; background: #b71c1c; overflow: hidden; touch-action: none; font-family: sans-serif; }
        #game-info { position: fixed; top: 10px; width: 100%; text-align: center; color: gold; z-index: 10; pointer-events: none; }
        #timer { font-size: 40px; font-weight: bold; color: white; }
        #score { font-size: 24px; display: block; }
        
        #player { position: absolute; bottom: 60px; left: 50%; width: 80px; height: 80px; font-size: 60px; display: flex; justify-content: center; align-items: center; transform: translateX(-50%); z-index: 20; }
        .treasure { position: absolute; width: 50px; height: 50px; font-size: 40px; display: flex; justify-content: center; align-items: center; }
        
        #blessing {
            position: fixed; top: 40%; width: 100%; text-align: center;
            color: #FFD700; font-size: 40px; font-weight: bold;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            display: none; z-index: 50; pointer-events: none;
            animation: popUp 1.5s ease-out forwards;
        }
        @keyframes popUp {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }

        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 100; padding: 20px; text-align: center; }
        #achievement-list { text-align: left; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; width: 80%; max-width: 300px; margin-bottom: 20px; }
        .achieved { color: #FFD700; font-weight: bold; margin: 5px 0; }
        .locked { color: #888; margin: 5px 0; font-size: 0.9em; }

        /* éœ‡å‹•æ•ˆæœ */
        .shake-msg { 
            color: #ff5252; 
            font-size: 28px; 
            font-weight: bold; 
            margin: 20px 0; 
            animation: shake 0.3s infinite; 
        }
        @keyframes shake {
            0% { transform: translate(2px, 2px) rotate(0deg); }
            25% { transform: translate(-3px, -2px) rotate(-2deg); }
            50% { transform: translate(3px, 0px) rotate(2deg); }
            75% { transform: translate(-2px, 3px) rotate(-1deg); }
            100% { transform: translate(2px, 2px) rotate(0deg); }
        }

        #restart-btn { padding: 15px 30px; font-size: 20px; background: gold; border: none; border-radius: 10px; cursor: pointer; color: #b71c1c; font-weight: bold; }
    </style>
</head>
<body>

    <div id="game-info">
        <span id="timer">30</span><br>
        <span id="score">æ¥åˆ°å…ƒå¯¶: 0</span>
    </div>

    <div id="blessing">ğŸ‰</div>
    <div id="player">ğŸ</div>
    <div id="treasures-container"></div>

    <div id="overlay">
        <h1>ğŸ§§ çµç®—æ™‚é–“ ğŸ§§</h1>
        <div id="final-display"></div>
        <div id="achievement-list"></div>
        <button id="restart-btn" onclick="location.reload()">å†æŒ‘æˆ°ä¸€æ¬¡</button>
    </div>

    <script>
     const player = document.getElementById('player');
const scoreEl = document.getElementById('score');
const timerEl = document.getElementById('timer');
const blessingEl = document.getElementById('blessing');
const overlay = document.getElementById('overlay');
const achievementListEl = document.getElementById('achievement-list');
const finalDisplay = document.getElementById('final-display');
const container = document.getElementById('treasures-container');

let score = 0;
let timeLeft = 30;
let gameActive = true;
let baseSpeed = 4;

// åˆå§‹å…ƒå¯¶é™£åˆ—
const treasures = [];

// å»ºç«‹å…ƒå¯¶çš„å‡½å¼ (å°è£èµ·ä¾†æ–¹ä¾¿é‡è¤‡å‘¼å«)
function addNewTreasure() {
    const t = {
        id: Date.now() + Math.random(),
        x: Math.random() * (window.innerWidth - 50),
        y: -100 - (Math.random() * 300),
        speed: baseSpeed + Math.random() * 2,
        el: null
    };
    
    const div = document.createElement('div');
    div.className = 'treasure';
    div.innerText = 'ğŸ’°';
    container.appendChild(div);
    t.el = div;
    
    treasures.push(t);
}

// åˆå§‹çµ¦ 3 å€‹å…ƒå¯¶
for(let i=0; i<3; i++) {
    addNewTreasure();
}

function resetTreasure(t) {
    t.x = Math.random() * (window.innerWidth - 50);
    t.y = -100 - (Math.random() * 200);
    t.speed = baseSpeed + Math.random() * 2;
}

const blessings = [
    { score: 18, text: "ğŸ§§ è²¡æºæ»¾æ»¾ä¾†ï¼" },
    { score: 58, text: "âœ¨ è¬äº‹çš†å¦‚æ„ï¼" },
    { score: 66, text: "ğŸš€ ç¨‹å¼æ²’ Bugï¼" },
    { score: 88, text: "ğŸ’ è–ªæ°´æ¼²ä¸åœï¼" },
    { score: 128, text: "ğŸŠ 2026 æˆ°ç¥ï¼" }
];

function moveHandler(e) {
    if (!gameActive) return;
    let clientX = e.touches ? e.touches[0].clientX : e.clientX;
    player.style.left = clientX + 'px';
}
window.addEventListener('mousemove', moveHandler);
window.addEventListener('touchmove', moveHandler, { passive: false });

// --- ä¿®æ”¹ï¼šæ¯ 5 ç§’å¢åŠ é€Ÿåº¦ + å¢åŠ ä¸€å€‹å…ƒå¯¶ ---
const countdown = setInterval(() => {
    if (gameActive) {
        timeLeft--;
        timerEl.innerText = timeLeft;

        // æ¯é 5 ç§’çš„é‚è¼¯ (25, 20, 15, 10, 5 ç§’æ™‚è§¸ç™¼)
        if (timeLeft > 0 && timeLeft % 5 === 0) {
            baseSpeed += 0.5;
            addNewTreasure(); // å¢åŠ ä¸€å€‹å…ƒå¯¶ï¼
            console.log("é›£åº¦æå‡ï¼ç›®å‰å…ƒå¯¶æ•¸: " + treasures.length);
        }

        // æœ€å¾Œ 5 ç§’æš´èµ°
        if (timeLeft <= 5 && timeLeft > 0) {
            baseSpeed += 1.0;
            timerEl.style.color = "red";
        }

        if (timeLeft <= 0) endGame();
    }
}, 1000);

function showBlessing(text) {
    blessingEl.innerText = text;
    blessingEl.style.display = 'block';
    setTimeout(() => { blessingEl.style.display = 'none'; }, 1000);
}

function endGame() {
    gameActive = false;
    clearInterval(countdown);
    
    if (score === 0) {
        finalDisplay.innerHTML = `<div class="shake-msg">ä½ ä»Šå¹´è¦èººå¹³äº†å—ï¼ŸğŸ›Œ</div>`;
        achievementListEl.style.display = 'none';
    } else if (score < 20) {
        finalDisplay.innerHTML = `<p style="font-size: 20px;">æˆç¸¾ï¼š${score} åˆ†</p>
                                  <div class="shake-msg" style="animation-duration: 0.8s;">å¤©ä¸Šæ‰ä¸‹äº†é¤¡é¤…<br>ä½ å±…ç„¶åªæ¥åˆ°é€™é»ï¼ŸğŸ¥§</div>`;
        achievementListEl.style.display = 'none';
    } else {
        finalDisplay.innerHTML = `<p style="font-size: 24px;">æœ€çµ‚æˆç¸¾ï¼š${score} åˆ†</p>`;
        let listHTML = "";
        blessings.forEach(item => {
            if (score >= item.score) listHTML += `<div class="achieved">âœ… ${item.text}</div>`;
            else listHTML += `<div class="locked">ğŸ”’ æ»¿ ${item.score} åˆ†è§£é–</div>`;
        });
        achievementListEl.innerHTML = listHTML;
        achievementListEl.style.display = 'block';
    }
    overlay.style.display = 'flex';
}

function draw() {
    if (!gameActive) return;
    const pRect = player.getBoundingClientRect();
    
    treasures.forEach(t => {
        t.y += t.speed;
        if (t.y > window.innerHeight) resetTreasure(t);
        
        const tRect = t.el.getBoundingClientRect();
        if (tRect.bottom > pRect.top && tRect.right > pRect.left && tRect.left < pRect.right && tRect.top < pRect.bottom) {
            score++;
            scoreEl.innerText = "æ¥åˆ°å…ƒå¯¶: " + score;
            let found = blessings.find(b => b.score === score);
            if (found) showBlessing(found.text);
            resetTreasure(t);
            baseSpeed += 0.03;
        }
        t.el.style.top = t.y + 'px';
        t.el.style.left = t.x + 'px';
    });
    requestAnimationFrame(draw);
}
draw();
    </script>
</body>
</html>